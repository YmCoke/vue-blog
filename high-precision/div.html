<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>高精度除法 | coke的博客</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/vue-blog/favicon.ico">
    <link rel="manifest" href="/vue-blog/manifest.json">
    <meta name="description" content="专注于写算法的前端工程师">
    <link rel="preload" href="/vue-blog/assets/css/0.styles.0e7090cc.css" as="style"><link rel="preload" href="/vue-blog/assets/js/app.b8a6785c.js" as="script"><link rel="preload" href="/vue-blog/assets/js/2.6251e0ea.js" as="script"><link rel="preload" href="/vue-blog/assets/js/11.a79ab868.js" as="script"><link rel="prefetch" href="/vue-blog/assets/js/10.eb74e050.js"><link rel="prefetch" href="/vue-blog/assets/js/12.030b1b17.js"><link rel="prefetch" href="/vue-blog/assets/js/13.9f750832.js"><link rel="prefetch" href="/vue-blog/assets/js/14.4b8703c5.js"><link rel="prefetch" href="/vue-blog/assets/js/15.367d06d7.js"><link rel="prefetch" href="/vue-blog/assets/js/16.13761067.js"><link rel="prefetch" href="/vue-blog/assets/js/17.834bc26c.js"><link rel="prefetch" href="/vue-blog/assets/js/18.d00d783a.js"><link rel="prefetch" href="/vue-blog/assets/js/19.5121ff35.js"><link rel="prefetch" href="/vue-blog/assets/js/20.b69d0ffe.js"><link rel="prefetch" href="/vue-blog/assets/js/3.6be60106.js"><link rel="prefetch" href="/vue-blog/assets/js/4.88c50503.js"><link rel="prefetch" href="/vue-blog/assets/js/5.0d2e8757.js"><link rel="prefetch" href="/vue-blog/assets/js/6.c87d310a.js"><link rel="prefetch" href="/vue-blog/assets/js/7.80e02e68.js"><link rel="prefetch" href="/vue-blog/assets/js/8.0f07b5a4.js"><link rel="prefetch" href="/vue-blog/assets/js/9.fa966027.js">
    <link rel="stylesheet" href="/vue-blog/assets/css/0.styles.0e7090cc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-blog/" class="home-link router-link-active"><!----> <span class="site-name">coke的博客</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前言</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>排序算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>二分算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>高精度运算</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-blog/high-precision/intro.html" class="sidebar-link">介绍</a></li><li><a href="/vue-blog/high-precision/sum.html" class="sidebar-link">高精度加法</a></li><li><a href="/vue-blog/high-precision/sub.html" class="sidebar-link">高精度减法</a></li><li><a href="/vue-blog/high-precision/mul.html" class="sidebar-link">高精度乘法</a></li><li><a href="/vue-blog/high-precision/div.html" aria-current="page" class="active sidebar-link">高精度除法</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前缀和与差分</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>双指针算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>位运算</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>单调栈</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="高精度除法"><a href="#高精度除法" class="header-anchor">#</a> 高精度除法</h1> <p>实现一个函数, 实现a / b. (其中<strong>a是string, b是number</strong>, 保证b不为0), 返回一个对象, 对象要求包含俩个属性: <strong>余数r, 商s</strong></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>高精度除法与前面几个高精度不同, 考虑到双高精度除法实现的难度过高. 故换成单高精度的除法运算</p></div> <p>高精度除法与前面几个高精度运算不太相同, 有自己独自的一套计算过程. 但换汤不换药, 写起代码来还是差不多的, 在看代码之前, 需要先知道几个细节</p> <ol><li><p>除法的运算是从高位开始的, 与加减乘不同</p></li> <li><p>代码中变量含义: b是余数, r是余数, s是商</p></li> <li><p>建议在看代码前在纸上模拟一遍除法的运算流程</p></li></ol> <h2 id="代码模板"><a href="#代码模板" class="header-anchor">#</a> 代码模板</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">/* 将a的每一位摘出来, 以低位的方式存储到A数组中. 省略... */</span>

    <span class="token keyword">const</span> <span class="token constant">C</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> r <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    
    <span class="token comment">/* 核心逻辑 */</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token constant">A</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">--</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        r <span class="token operator">=</span> r <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token constant">A</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>r <span class="token operator">/</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        r <span class="token operator">=</span> r <span class="token operator">%</span> b<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* 处理结果 */</span>
    <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token constant">C</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token constant">C</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token constant">C</span><span class="token punctuation">[</span><span class="token constant">C</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token constant">C</span><span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&gt;=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">--</span><span class="token punctuation">)</span> s <span class="token operator">+=</span> <span class="token constant">C</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>r<span class="token operator">:</span> r<span class="token punctuation">,</span> s<span class="token operator">:</span> s<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// 逆转数组的元素</span>
<span class="token keyword">function</span> <span class="token function">reverse</span><span class="token punctuation">(</span><span class="token parameter">l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> i <span class="token operator">=</span> l<span class="token punctuation">,</span> j <span class="token operator">=</span> r<span class="token punctuation">;</span>
    <span class="token keyword">while</span><span class="token punctuation">(</span>i <span class="token operator">&lt;</span> j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>arr<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        i <span class="token operator">++</span><span class="token punctuation">,</span> j <span class="token operator">--</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="代码讲解"><a href="#代码讲解" class="header-anchor">#</a> 代码讲解</h2> <ol><li>核心代码逻辑</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>r <span class="token operator">=</span> r <span class="token operator">*</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token constant">A</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span>
<span class="token constant">C</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>r <span class="token operator">/</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
r <span class="token operator">=</span> r <span class="token operator">%</span> b<span class="token punctuation">;</span>
</code></pre></div><p><strong>当前位计算的结果(<code>C[i]</code>), 等于于上一次计算余下的值(<code>r</code>)拼上当前位的值(<code>A[i]</code>)除于<code>b</code>向下取整的结果</strong>.</p> <p>除完后剩余的值参与下次计算. 所以当前为余下的值为<code>r = r % b</code></p> <ol start="2"><li>为什么要将结果数组C进行逆转后再去除前导0</li></ol> <p>如果直接判断数组的第一项是否为0, 用shift方法的话, 也可以实现去除前导0的效果. 但如果存在多个前导0的话效率会很低, <strong>因为会进行多次shift操作, 也就是把数组中每一位的元素不断的往前挪</strong>. 如果有k个前导0, 那么时间复杂度就是O(kN).</p> <p>为保证算法时间复杂度的稳定性, 我们采取先逆转数组, 再使用pop的方式去除前导0. pop的时间复杂度是O(1), 逆转的时间复杂度是O(n). 这样时间复杂度就可以稳定在O(n)</p> <ol start="3"><li>reverse方法</li></ol> <p>使用俩个指针分别指向要逆转的区间的左端点和右端点, 不断交换对称的俩个元素, 交换后前面的指针后移, 后面的指针前移. 当俩指针相遇时, 逆转结束.</p> <p>该方法: 时间复杂度: O(n), 空间复杂度: O(1)</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue-blog/high-precision/mul.html" class="prev">
        高精度乘法
      </a></span> <span class="next"><a href="/vue-blog/prefix-sum&amp;difference/prefix-sum.html">
        前缀和算法
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vue-blog/assets/js/app.b8a6785c.js" defer></script><script src="/vue-blog/assets/js/2.6251e0ea.js" defer></script><script src="/vue-blog/assets/js/11.a79ab868.js" defer></script>
  </body>
</html>
